# =====================================================================
# Shuffled Endpoint Dataset Builder Configuration
# =====================================================================
# Builds endpoint dataset using pre-shuffled trajectory indices
# Useful for incremental dataset construction with consistent ordering
#
# Usage:
#   python src/build_shuffled_endpoint_dataset.py
#   python src/build_shuffled_endpoint_dataset.py system=humanoid
#   python src/build_shuffled_endpoint_dataset.py increment=200 start=0 end=100
#   python src/build_shuffled_endpoint_dataset.py type=test
# =====================================================================

defaults:
  - system: cartpole

data_dirs: /common/users/shared/pracsys/genMoPlan/data_trajectories/cartpole_pybullet/trajectories
shuffled_idxs_file: /common/users/shared/pracsys/genMoPlan/data_trajectories/cartpole_pybullet/shuffled_indices.txt
dest_dir: /common/users/dm1487/arcmg_datasets/cartpole_pybullet/incremental_endpoint_dataset/

# Processing range (slicing shuffled_indices.txt)
start: 1000    # Start indexx
end: 1500       # End index (exclusive)
increment: test # Number used in output filename (e.g., "train_first_last_endpoint_dataset.txt")

# Dataset type: "train", "val", or "test"
# - train/val: Creates endpoint pairs for ALL states in trajectory → final state
# - test: Creates only FIRST state → final state (one pair per trajectory)
type: test
# =====================================================================
# Attractor Classification & Balancing
# =====================================================================
# Trajectories are classified using system.is_in_attractor():
#   1  = success (trajectory reaches attractor)
#   -1 = failure (trajectory doesn't reach attractor)
#
# Output format (metadata):
#   file_path start_idx attractor
#
# Model learns to regress from start_state → scalar (1 or -1)
# =====================================================================
attractor_radius: 0.1        # Radius for success/failure classification
balance_dataset: false        # true = balance success/failure counts (train/val only)
first_last_only: false        # true = only use first and last state for endpoint pairs